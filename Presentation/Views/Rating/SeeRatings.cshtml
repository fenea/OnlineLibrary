@model SeeReviewModel


<section id="happyClient" style="margin-top:-70px;">

      <div class="container" style="padding:50px;">
            <h2 class="sectionHeading">
                <span class="subHeading">Review </span>
                What people say
            </h2>
     <img style="height:15%;width: 20%;max-width:20%; display: block;margin-left: auto;margin-right: auto" src= "@Model.Book.PhotoPath">
     <div class="info" style=" text-align: center; ">
                                <h4 class="name">@Model.Book.Name</h4>
                                <span class="regency">by @Model.Book.Author / @Model.Book.Type</span>
                                <p class="desc" style="margin-left:50% margin-right:50%;">
                                    @Model.Book.Description
            </p>
                            </div>

         <div class="container" style="margin-left: 25%;">
    <div class="row">
        <div class="col-xs-12 col-md-6">
            <div class="well well-sm" >
                <div class="row"  >
                    <div class="col-xs-12 col-md-6 text-center" >
                        <h1 class="rating-num">
                            @Model.Book.Score/5</h1>
                        <div class="rating">
                      

                        @for (var i=0;i<Model.Book.Score;i++)
                        {
                             <span class="glyphicon glyphicon-star"></span>
                        }

                        @for (var i=Model.Book.Score; i<5;i++)
                        {
                             <span class="glyphicon glyphicon-star-empty"></span>

                        }
                        </div>
                        <div>
                            <span class="glyphicon glyphicon-user"></span> @Model.Rating.Count total
                        </div>
                    </div>
                    <div class="col-xs-12 col-md-6">
                        <div class="row rating-desc">
                            <div class="col-xs-3 col-md-3 text-right">
                                <span class="glyphicon glyphicon-star"></span>5
                            </div>
                            <div class="col-xs-8 col-md-9">
                                <div class="progress progress-striped">
                                    <div class="progress-bar progress-bar-success" role="progressbar" aria-valuenow="20"
                                        aria-valuemin="0" aria-valuemax="100" style="width : @(Model.NrOfGradesFiveProcent + "%");)">
                                        <span class="sr-only">@Model.NrOfGradesFiveProcent</span>
                                    </div>
                                </div>
                            </div>
                            <!-- end 5 -->
                            <div class="col-xs-3 col-md-3 text-right">
                                <span class="glyphicon glyphicon-star"></span>4
                            </div>
                            <div class="col-xs-8 col-md-9">
                                <div class="progress">
                                    <div class="progress-bar progress-bar-success" role="progressbar" aria-valuenow="20"
                                        aria-valuemin="0" aria-valuemax="100" style="width : @(Model.NrOfGradesFourProcent + "%");)">
                                        <span class="sr-only">@Model.NrOfGradesFourProcent %</span>
                                    </div>
                                </div>
                            </div>
                            <!-- end 4 -->
                            <div class="col-xs-3 col-md-3 text-right">
                                <span class="glyphicon glyphicon-star"></span>3
                            </div>
                            <div class="col-xs-8 col-md-9">
                                <div class="progress">
                                    <div class="progress-bar progress-bar-info" role="progressbar" aria-valuenow="20"
                                        aria-valuemin="0" aria-valuemax="100" style="width : @(Model.NrOfGradesThreeProcent + "%");)">
                                        <span class="sr-only">@Model.NrOfGradesThreeProcent %</span>
                                    </div>
                                </div>
                            </div>
                            <!-- end 3 -->
                            <div class="col-xs-3 col-md-3 text-right">
                                <span class="glyphicon glyphicon-star"></span>2
                            </div>
                            <div class="col-xs-8 col-md-9">
                                <div class="progress">
                                    <div class="progress-bar progress-bar-warning" role="progressbar" aria-valuenow="20"
                                        aria-valuemin="0" aria-valuemax="100" style="width : @(Model.NrOfGradesTwoProcent + "%");)">
                                        <span class="sr-only">@Model.NrOfGradesTwoProcent %</span>
                                    </div>
                                </div>
                            </div>
                            <!-- end 2 -->
                            <div class="col-xs-3 col-md-3 text-right">
                                <span class="glyphicon glyphicon-star"></span>1
                            </div>
                            <div class="col-xs-8 col-md-9">
                                <div class="progress">
                                    <div class="progress-bar progress-bar-danger" role="progressbar" aria-valuenow="80"
                                        aria-valuemin="0" aria-valuemax="100" style="width : @(Model.NrOfGradesOneProcent + "%");)">
                                        <span class="sr-only">@Model.NrOfGradesOneProcent %</span>
                                    </div>
                                </div>
                            </div>
                            <!-- end 1 -->
                        </div>
                        <!-- end row -->
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

  <div class="container" style="margin-bottom:30px">
  <div class="row">
    <div class="col-sm-10 col-sm-offset-1" id="logout">
   
        <div class="comment-tabs">
            <ul class="nav nav-tabs" role="tablist">
                <li class="active"><a href="#comments-logout" role="tab" data-toggle="tab"><h4 class="reviews text-capitalize">Comments</h4></a></li>
                <li><a href="#add-comment" role="tab" data-toggle="tab"><h4 class="reviews text-capitalize">Add comment</h4></a></li>
            </ul>   

            <div class="tab-content">
                <div class="tab-pane active" id="comments-logout">                
                    <ul class="media-list">
                      
                    @{
                        int count=0;
                        foreach(var r in Model.Rating)
                        {
                            <li class="media">
                                <a class="pull-left" href="#">
                                <img class="media-object img-circle" src="@Model.User[count].PhotoPath" alt="profile">
                                </a>
                                <div class="media-body">
                                <div class="well well-lg">
                                    <h4 class="media-heading text-uppercase reviews">@Model.User[count].UserName </h4>
                                    <ul class="media-date text-uppercase reviews list-inline">
                                         @for (var i=0;i<@Model.Grades[count];i++)     
                                        { 
                                            <span class="glyphicon glyphicon-star"></span>
                                        }
                                                
                                        @for (var i=@Model.Grades[count]; i<5;i++)
                                        { 
                                            <span class="glyphicon glyphicon-star-empty"></span>
                                        }
                                    </ul>
                                    <p class="media-comment">
                                            @r.Review
                                    </p>
                                </div>              
                                </div>
                            </li> 
                            count++;
                        }
                    }
                </ul>
                </div>

        
     
                 <div class="tab-pane" id="add-comment" style="margin-bottom:10px">
             <div class="form-horizontal" id="commentForm" > 

                     @using (@Html.BeginForm("AddRatings", "Rating"))
                {
                       @Html.HiddenFor(t=>t.Book.BookId)
                        <div class="form-group">
                            <label class="col-sm-2 control-label">Review</label>
                            <div class="col-lg-6">
                            <div class="col-sm-10">
                                @Html.TextBoxFor(t => t._rating.Review, new { @class = "form-control  " })
                                @Html.ValidationMessageFor(t=> t._rating.Review, "", new {@class = "red"})
                            </div>
                            </div>
                        </div>
                       
                        <div class="form-group">
                            <label class="col-sm-2 control-label">Grade</label>
                             <div class="col-lg-6">
                                 <div class="col-sm-10">                   
                                     @Html.DropDownListFor(t => t._rating.Grade, new SelectList(new int[] { 1,2,3,4,5 }))
                                     <!--   
                                         @Html.TextBoxFor(t => t._rating.Grade, new { @class = "form-control" })
                                    -->
                                 @Html.ValidationMessageFor(t=> t._rating.Review, "", new {@class = "red"})

                                </div>
                                </div>
                        </div>

                        <div class="form-group">
                            <div class="col-sm-offset-2 col-sm-10">
                <button class="btn btn-info btn-circle text-uppercase" ><span class="glyphicon glyphicon-share-alt"></span> Post</button>
                            </div>
                       
                        </div>            
                }         
                </div>

            </div>
        </div>
    </div>
  </div>
</div>

</section>

@if (TempData["error"]!=null)
{
<script type="text/javascript">
window.onload = function(){
    alert("You already added a comment");
}
</script>
}